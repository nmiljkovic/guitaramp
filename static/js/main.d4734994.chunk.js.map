{"version":3,"sources":["impulses/reverb/pcm90cleanplate.wav","impulses/reverb/parking-garage.wav","impulses/reverb/scala-milan-opera.wav","impulses/cabinet/Allure_59_Tweed_P10N.wav","impulses/cabinet/Allure_64_A30_G12.wav","impulses/cabinet/Allure_64_USDeluxe_P12N.wav","impulses/cabinet/Allure_67_Brit_Greenback.wav","impulses/cabinet/Marshall1960.wav","impulses/cabinet/MesaBoogie57TS.wav","impulses/cabinet/vox_tweed_1x12.wav","impulses/cabinet/Plexi Lead Channel.wav","reducers/distortion.js","components/Crunch.js","components/Knob.js","reducers/reverb.js","reducers/tone.js","components/Knobs.js","components/PedalSwitch.js","components/Lamp.js","reducers/eq.js","components/Equalizer.js","reducers/preset.js","components/AdvancedAmpControls/PresetSelector.js","components/AdvancedAmpControls/AdvancedReverb.js","reducers/cabinet.js","components/AdvancedAmpControls/CabinetSelector.js","components/AdvancedAmpControls/DistortionSelector.js","components/AdvancedAmpControls.js","components/Amp.js","effects/utils.js","effects/Bypass.js","effects/Tone.js","effects/Equalizer.js","effects/Convolver.js","effects/distortion_fns.js","effects/Distortion.js","Amplifier.js","reducers/reducer.js","index.js"],"names":["module","exports","__webpack_require__","p","initialState","bypass","gain","curve","curveGainMapping","blues","sunshine","driver","sustained","arch","cubic","setDistortionBypass","type","Crunch","toggleCrunch","_this","props","distortionBypass","className","this","react","style","textAlign","display","justifyContent","onClick","React","mapDispatchToProps","connect","state","distortion","Knob","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","render","caption","map","i","key","transform","onDoubleClick","onReset","ref","getRotationInDegrees","onWheel","event","preventDefault","diff","Math","min","max","deltaY","newValue","value","onChange","setState","nextProps","refs","knob","addEventListener","removeEventListener","degPerVal","getNormalizedValue","round","reverbImpulses","id","name","impulse","pcm90cleanplate","parkingGarage","scalaMilanOpera","createSetAction","setBass","setMiddle","setTreble","setPresence","setVolume","setMaster","bass","middle","treble","presence","volume","master","actionPropertyMap","_actionPropertyMap","defineProperty","Separator","width","backgroundColor","marginLeft","marginRight","Knobs","Knob_Knob","reverb","setReverb","objectSpread","tone","PedalSwitch","_ref","size","toggle","on","classnames","react_default","a","createElement","height","defaultProps","Lamp","bands","Equalizer","handleChange","index","setEqBand","toggleEq","setEqBypass","_this2","labels","-15","0","15","frequencies","band","ret","freq","label","lib_default","tooltip","orientation","renderSliders","components_PedalSwitch","components_Lamp","eq","selectedPreset","presets","localStorage","getItem","JSON","parse","preset","cabinet","savePreset","presetName","dispatch","getState","settings","loadPreset","_useState","useState","_useState2","slicedToArray","inEditMode","setEditMode","_useState3","_useState4","setPresetName","onClickSavePreset","useCallback","onChangePresetName","target","onSelectNewPreset","onCancelEditMode","Fragment","htmlFor","boxSizing","padding","reverbImpulse","setReverbImpulse","e","cabinetImpulses","allure59tweed","allure64a30","allure64usdeluxe","allure67brit","marshall1960","mesaboogie57ts","voxtweed1x12","plexilead","cabinetImpulse","cabinetBypass","setCabinetImpulse","setCabinetBypass","checked","setCurve","setBypass","setGain","step","color","AdvancedAmpControls","AdvancedAmpControls_AdvancedReverb","AdvancedAmpControls_CabinetSelector","AdvancedAmpControls_DistortionSelector","AdvancedAmpControls_PresetSelector","Amp","advanced","setShowAdvanced","useEffect","handler","document","components_Knobs","src_components_Crunch","src_components_AdvancedAmpControls","src_components_Equalizer","_arguments","arguments","_loop","from","resolveOutput","node","AudioNode","Array","isArray","flatten","n","getOutput","length","undefined","to","resolveInput","getInput","forEach","f","t","arr","result","push","Bypass","context","effect","createGain","effectOut","active","isActive","MidEQ","bassFilter","createBiquadFilter","frequency","midFilter","trebleFilter","presenceFilter","eqBands","filter","indexOf","Error","concat","Cabinet","impulseUrl","convolver","createConvolver","input","dry","wet","output","setImpulse","cos","PI","ajaxRequest","XMLHttpRequest","open","responseType","onload","audioData","response","decodeAudioData","buffer","err","send","curves","amount","x","k","tanh","y","abs","pow","atan","Distortion","filter1","Q","SQRT1_2","preFilter","waveShaper","createWaveShaper","oversample","postFilter","toneFilter","setDistortionCurve","Float32Array","makeDistortionCurve","sampleRate","Amplifier","store","setup","inputGain","Tone","equalizer","equalizerBypass","Convolver","update","find","getCabinetImpulseUrl","keys","setFrequency","subscribe","reducer","combineReducers","action","hasOwnProperty","property","slice","existingPreset","findIndex","toLowerCase","newPresets","splice","console","log","sort","left","right","reducers_reducer","newState","setItem","stringify","window","BootstrapGuitarAmplifier","opts","createStore","applyMiddleware","thunk","element","audioInput","AudioContext","destination","ReactDOM","es","Amp_Amp","Promise","resolve","navigator","mediaDevices","getUserMedia","audio","echoCancellation","autoGainControl","noiseSuppression","latency","then","stream","createMediaStreamSource","amplifier","unmount","unmountComponentAtNode","close"],"mappings":"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","file":"static/js/main.d4734994.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/pcm90cleanplate.ce654815.wav\";","module.exports = __webpack_public_path__ + \"static/media/parking-garage.2c0a9528.wav\";","module.exports = __webpack_public_path__ + \"static/media/scala-milan-opera.5e8146d9.wav\";","module.exports = __webpack_public_path__ + \"static/media/Allure_59_Tweed_P10N.62b177eb.wav\";","module.exports = __webpack_public_path__ + \"static/media/Allure_64_A30_G12.9f93c5df.wav\";","module.exports = __webpack_public_path__ + \"static/media/Allure_64_USDeluxe_P12N.1f523840.wav\";","module.exports = __webpack_public_path__ + \"static/media/Allure_67_Brit_Greenback.49f49da7.wav\";","module.exports = __webpack_public_path__ + \"static/media/Marshall1960.d2bdc216.wav\";","module.exports = __webpack_public_path__ + \"static/media/MesaBoogie57TS.a96aabe5.wav\";","module.exports = __webpack_public_path__ + \"static/media/vox_tweed_1x12.7fa61919.wav\";","module.exports = __webpack_public_path__ + \"static/media/Plexi Lead Channel.0ecb4c85.wav\";","const initialState = {\n  bypass: false,\n  gain: 0.5,\n  curve: \"blues\",\n};\n\nconst curveGainMapping = {\n  blues: 0.5,\n  sunshine: 0.2,\n  driver: 0.2,\n  sustained: 0.3,\n  arch: 0.2,\n  cubic: 0,\n};\n\nfunction getGainForCurve(curve) {\n  if (curveGainMapping.hasOwnProperty(curve)) {\n    return curveGainMapping[curve];\n  }\n  return 1;\n}\n\nexport const SET_DISTORTION_BYPASS = \"SET_DISTORTION_BYPASS\";\nexport const SET_DISTORTION_CURVE = \"SET_DISTORTION_CURVE\";\nexport const SET_DISTORTION_GAIN = \"SET_DISTORTION_GAIN\";\n\nexport const setDistortionBypass = bypass => ({type: SET_DISTORTION_BYPASS, bypass});\nexport const setDistortionCurve = curve => ({type: SET_DISTORTION_CURVE, curve});\nexport const setDistortionGain = gain => ({type: SET_DISTORTION_GAIN, gain});\n\nexport const distortionReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case SET_DISTORTION_BYPASS:\n      return {...state, bypass: action.bypass};\n    case SET_DISTORTION_CURVE:\n      return {...state, curve: action.curve, gain: getGainForCurve(action.curve)};\n    case SET_DISTORTION_GAIN:\n      return {...state, gain: action.gain};\n    default:\n      return state;\n  }\n};\n","import * as React from \"react\";\nimport \"./Crunch.css\";\nimport {connect} from \"react-redux\";\nimport {setDistortionBypass} from \"../reducers/distortion\";\n\nclass Crunch extends React.Component {\n\n  toggleCrunch = () => {\n    this.props.setDistortionBypass(!this.props.distortionBypass);\n  };\n\n  render() {\n    const clean = this.props.distortionBypass;\n    let className = \"crunch-switch\";\n    if (clean) {\n      className += \" switch-clean\";\n    } else {\n      className += \" switch-crunch\";\n    }\n\n    return (\n      <div className=\"crunch\">\n        <div style={{textAlign: \"center\"}}>\n          CLEAN / CRUNCH\n        </div>\n        <div style={{\n          display: \"flex\",\n          justifyContent: \"center\",\n        }} onClick={this.toggleCrunch}>\n          <div className={className}>\n            <div className=\"crunch-switch-inner\"/>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  distortionBypass: state.distortion.bypass,\n});\n\nconst mapDispatchToProps = {\n  setDistortionBypass,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Crunch);\n","import * as React from \"react\";\nimport \"./Knob.css\";\n\nexport default class Knob extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: (typeof props.value !== \"undefined\") ? props.value : 5\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({\n      value: (typeof nextProps.value !== \"undefined\") ? nextProps.value : 5\n    });\n  }\n\n  render = () => (\n    <div>\n      <div className=\"knob-caption\">\n        {this.props.caption}\n      </div>\n      <div className=\"knob-container\">\n        <div className=\"knob-ticks\">\n          {\n            [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10].map(i => (\n              <div className=\"knob-tick\"\n                   key={i}\n                   style={{\n                     transform: \"rotate(\" + (-150 + 30 * i) + \"deg)\",\n                   }}/>\n            ))\n          }\n          <div className=\"knob-0\">0</div>\n          <div className=\"knob-10\">10</div>\n        </div>\n        <div\n          onDoubleClick={this.onReset}\n          className=\"knob\" ref=\"knob\"\n          style={{transform: \"rotate(\" + this.getRotationInDegrees() + \"deg)\"}}\n        >\n          <div className=\"knob-dial\"/>\n        </div>\n      </div>\n    </div>\n  );\n\n  componentDidMount() {\n    this.refs.knob.addEventListener(\"wheel\", this.onWheel);\n  }\n\n  onWheel = (event) => {\n    event.preventDefault();\n\n    const diff = Math.min(Math.max(-0.5, -event.deltaY), 0.5);\n    const max = this.props.max || 10;\n    const min = this.props.min || 0;\n    const newValue = Math.max(min, Math.min(max, this.state.value + diff));\n    this.props.onChange(newValue);\n    this.setState({value: newValue});\n  };\n\n  onReset = () => {\n    this.props.onChange(0);\n    this.setState({value: 0});\n  };\n\n  componentWillUnmount() {\n    this.refs.knob.removeEventListener(\"wheel\", this.onWheel);\n  }\n\n  getNormalizedValue() {\n    const max = this.props.max || 10;\n    const min = this.props.min || 0;\n    const value = Math.max(min, Math.min(max, this.state.value));\n\n    return (value - min) / (max - min);\n  }\n\n  getRotationInDegrees() {\n    const v = this.getNormalizedValue();\n    const degPerVal = v * 300 - 150;\n    return Math.round(degPerVal);\n  }\n}\n","import pcm90cleanplate from \"../impulses/reverb/pcm90cleanplate.wav\";\nimport parkingGarage from \"../impulses/reverb/parking-garage.wav\";\nimport scalaMilanOpera from \"../impulses/reverb/scala-milan-opera.wav\";\n\nexport const reverbImpulses = [\n  {\n    id: \"pcm90\",\n    name: \"PCM90\",\n    impulse: pcm90cleanplate,\n  },\n  {\n    id: \"parking-garage\",\n    name: \"Parking Garage\",\n    impulse: parkingGarage,\n  },\n  {\n    id: \"milan-opera-hall\",\n    name: \"Milan Opera Hall\",\n    impulse: scalaMilanOpera,\n  },\n];\n\nconst initialState = {\n  gain: 10,\n  impulse: \"pcm90\",\n};\n\nexport function getReverbImpulseUrl(id) {\n  return reverbImpulses.find(impulse => impulse.id === id).impulse;\n}\n\nexport const SET_REVERB = \"SET_REVERB\";\nexport const SET_REVERB_IMPULSE = \"SET_REVERB_IMPULSE\";\n\nexport const setReverb = gain => ({type: SET_REVERB, gain});\nexport const setReverbImpulse = id => ({type: SET_REVERB_IMPULSE, id});\n\nexport const reverbReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case SET_REVERB:\n      return {...state, gain: action.gain};\n    case SET_REVERB_IMPULSE:\n      return {...state, impulse: action.id};\n    default:\n      return state;\n  }\n};\n","function createSetAction(type) {\n  return function (value) {\n    return {type, value};\n  };\n}\n\nexport const SET_BASS = \"SET_BASS\";\nexport const SET_MIDDLE = \"SET_MIDDLE\";\nexport const SET_TREBLE = \"SET_TREBLE\";\nexport const SET_PRESENCE = \"SET_PRESENCE\";\nexport const SET_VOLUME = \"SET_VOLUME\";\nexport const SET_MASTER = \"SET_MASTER\";\n\nexport const setBass = createSetAction(SET_BASS);\nexport const setMiddle = createSetAction(SET_MIDDLE);\nexport const setTreble = createSetAction(SET_TREBLE);\nexport const setPresence = createSetAction(SET_PRESENCE);\nexport const setVolume = createSetAction(SET_VOLUME);\nexport const setMaster = createSetAction(SET_MASTER);\n\nconst initialState = {\n  bass: 0,\n  middle: 0,\n  treble: 0,\n  presence: 0,\n  volume: 5,\n  master: 10,\n};\n\nconst actionPropertyMap = {\n  [SET_BASS]: \"bass\",\n  [SET_MIDDLE]: \"middle\",\n  [SET_TREBLE]: \"treble\",\n  [SET_PRESENCE]: \"presence\",\n  [SET_VOLUME]: \"volume\",\n  [SET_MASTER]: \"master\",\n};\n\nexport const toneReducer = (state = initialState, action) => {\n  if (!actionPropertyMap.hasOwnProperty(action.type)) {\n    return state;\n  }\n  const property = actionPropertyMap[action.type];\n  return {...state, [property]: action.value};\n};\n","import * as React from \"react\";\nimport Knob from \"./Knob\";\nimport {connect} from \"react-redux\";\nimport {setReverb} from \"../reducers/reverb\";\nimport {setBass, setMiddle, setPresence, setTreble, setVolume, setMaster} from \"../reducers/tone\";\n\nfunction Separator() {\n  return <div style={{\n    width: 2, backgroundColor: \"black\",\n    marginLeft: 10,\n    marginRight: 10,\n  }}/>;\n}\n\nclass Knobs extends React.Component {\n  render() {\n    const props = this.props;\n\n    return (\n      <div style={{display: \"flex\"}}>\n        <Knob caption=\"bass\"\n              value={props.bass}\n              min={-15} max={15}\n              onChange={this.props.setBass}/>\n        <Knob caption=\"middle\"\n              value={props.middle}\n              min={-15} max={15}\n              onChange={this.props.setMiddle}/>\n        <Knob caption=\"treble\"\n              value={props.treble}\n              min={-15} max={15}\n              onChange={this.props.setTreble}/>\n        <Knob caption=\"presence\"\n              value={props.presence}\n              min={-15} max={15}\n              onChange={this.props.setPresence}/>\n        <Separator/>\n        <Knob caption=\"reverb\"\n              value={props.reverb}\n              min={0} max={40}\n              onChange={this.props.setReverb}\n        />\n        <Separator/>\n        <Knob caption=\"volume\"\n              value={props.volume}\n              min={0} max={10}\n              onChange={this.props.setVolume}/>\n        <Knob caption=\"master\"\n              value={props.master}\n              min={0} max={10}\n              onChange={this.props.setMaster}/>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  ...state.tone,\n  reverb: state.reverb.gain,\n});\n\nconst mapDispatchToProps = {\n  setBass,\n  setMiddle,\n  setTreble,\n  setPresence,\n  setReverb,\n  setVolume,\n  setMaster,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Knobs);\n","import React from \"react\";\nimport \"./PedalSwitch.css\";\nimport classnames from \"classnames\";\n\nfunction PedalSwitch({size, toggle, on}) {\n  const className = classnames(\"pedal-switch\", {\n    \"on\": on,\n  });\n  return (\n    <div\n      onClick={toggle}\n      className={className}\n      style={{width: size, height: size}}\n    />\n  );\n}\n\nPedalSwitch.defaultProps = {\n  size: 30,\n  on: false,\n};\n\nexport default PedalSwitch;\n","import React from \"react\";\nimport classnames from \"classnames\";\nimport \"./Lamp.css\";\n\nfunction Lamp({toggle, on}) {\n  const className = classnames(\"lamp-switch-inner\", {\n    \"on\": on,\n  });\n  return (\n    <div className=\"lamp-switch\" onClick={toggle}>\n      <div className={className}/>\n    </div>\n  );\n}\n\nexport default Lamp;\n","const initialState = {\n  bypass: false,\n  bands: [\n    0, // 100hz\n    0, // 200hz\n    0, // 400hz\n    0, // 800hz\n    0, // 1.6khz\n    0, // 3.2khz\n    0, // 6.4khz\n  ],\n};\n\nexport const SET_EQ_BAND = \"SET_EQ_BAND\";\nexport const SET_EQ_BYPASS = \"SET_EQ_BYPASS\";\n\nexport const setEqBypass = function (bypass) {\n  return {\n    type: SET_EQ_BYPASS,\n    bypass,\n  };\n};\n\nexport const setEqBand = function (index, value) {\n  return {\n    type: SET_EQ_BAND,\n    index, value,\n  };\n};\n\nexport const eqReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case SET_EQ_BYPASS:\n      return {...state, bypass: action.bypass};\n    case SET_EQ_BAND:\n      const bands = state.bands.slice();\n      bands[action.index] = action.value;\n      return {...state, bands};\n    default:\n      return state;\n  }\n};\n","import * as React from \"react\";\nimport Slider from \"react-rangeslider\";\nimport \"react-rangeslider/lib/index.css\";\nimport \"./Equalizer.css\";\nimport {connect} from \"react-redux\";\nimport PedalSwitch from \"./PedalSwitch\";\nimport Lamp from \"./Lamp\";\nimport {setEqBand, setEqBypass} from \"../reducers/eq\";\n\nclass Equalizer extends React.Component {\n  handleChange = (index, value) => {\n    this.props.setEqBand(index, value);\n  };\n\n  toggleEq = () => {\n    this.props.setEqBypass(!this.props.bypass);\n  };\n\n  renderSliders() {\n    let labels = {\n      \"-15\": \"-15\",\n      \"0\": \"0\",\n      \"15\": \"+15\",\n    };\n    return frequencies.map((band, index) => {\n      let ret = <div key={band.freq} className=\"equalizer-control\">\n        <div className=\"equalizer-freq-label\">{band.label}</div>\n        <Slider\n          min={-15}\n          max={15}\n          tooltip={false}\n          labels={labels}\n          value={this.props.bands[index]}\n          orientation='vertical'\n          onChange={(value) => this.handleChange(index, value)}\n        />\n      </div>;\n      labels = {};\n      return ret;\n    });\n  }\n\n  render() {\n    const on = !this.props.bypass;\n    return (\n      <div>\n        <div className=\"equalizer\">\n          <div className=\"equalizer-controls\">\n            {this.renderSliders()}\n          </div>\n        </div>\n        <div className=\"equalizer-pedal\">\n          <PedalSwitch on={on} toggle={this.toggleEq}/>\n          <Lamp on={on}/>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst frequencies = [{\n  freq: 100,\n  label: \"100\",\n}, {\n  freq: 200,\n  label: \"200\",\n}, {\n  freq: 400,\n  label: \"400\",\n}, {\n  freq: 800,\n  label: \"800\",\n}, {\n  freq: 1600,\n  label: \"1.6k\",\n}, {\n  freq: 3200,\n  label: \"3.2k\",\n}, {\n  freq: 6400,\n  label: \"6.4k\",\n}];\n\nconst mapStateToProps = state => state.eq;\n\nconst mapDispatchToProps = {\n  setEqBand,\n  setEqBypass,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Equalizer);\n","const initialPresets = [\n  {\n    name: \"default\",\n    preset: {\n      \"distortion\": {\"bypass\": false, \"gain\": 0.5, \"curve\": \"blues\"},\n      \"tone\": {\"gain\": 0, \"bass\": 0, \"middle\": 0, \"treble\": 0, \"presence\": 0, \"volume\": 10},\n      \"reverb\": {\"gain\": 10, \"impulse\": \"pcm90\"},\n      \"eq\": {\"bypass\": false, \"bands\": [0, 0, 0, 0, 0, 0, 0]},\n      \"cabinet\": {\"gain\": 1, \"bypass\": false, \"impulse\": \"59_tweed\"}\n    },\n  },\n];\n\nconst presets = localStorage.getItem(\"presets\") !== null ?\n  JSON.parse(localStorage.getItem(\"presets\")) :\n  initialPresets;\n\nconst initialState = {\n  selectedPreset: \"default\",\n  presets,\n};\n\nexport const SAVE_PRESET = \"SAVE_PRESET\";\nexport const LOAD_PRESET = \"LOAD_PRESET\";\n\nexport const savePreset = (name, preset) => ({\n  type: SAVE_PRESET,\n  name, preset,\n});\n\nexport const loadPreset = (name) => ({\n  type: LOAD_PRESET,\n  name,\n});\n\nexport const presetReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case SAVE_PRESET:\n      const existingPreset = state.presets.findIndex(preset =>\n        preset.name.toLowerCase() === action.name.toLowerCase());\n      let newPresets = state.presets.slice();\n      if (existingPreset !== -1) {\n        newPresets.splice(existingPreset, 1);\n      }\n      newPresets = newPresets.concat({\n        name: action.name,\n        preset: action.preset,\n      });\n      console.log(action.preset);\n      newPresets.sort((left, right) => left.name - right.name);\n      return {...state, presets: newPresets};\n    case LOAD_PRESET:\n      return {...state, selectedPreset: action.name};\n    default:\n      return state;\n  }\n};\n","import React, {useCallback, useState} from \"react\";\nimport {connect} from \"react-redux\";\nimport {loadPreset, savePreset} from \"../../reducers/preset\";\n\nfunction PresetSelector({presets, selectedPreset, savePreset, loadPreset}) {\n  const [inEditMode, setEditMode] = useState(false);\n  const [presetName, setPresetName] = useState(\"\");\n\n  const onClickSavePreset = useCallback(\n    () => {\n      if (!inEditMode) {\n        setPresetName(selectedPreset);\n        return setEditMode(true);\n      }\n\n      savePreset(presetName);\n      loadPreset(presetName);\n      return setEditMode(false);\n    },\n    [inEditMode, presetName, selectedPreset],\n  );\n\n  const onChangePresetName = useCallback(\n    (event) => setPresetName(event.target.value),\n    [],\n  );\n\n  const onSelectNewPreset = useCallback(\n    (event) => loadPreset(event.target.value),\n    [],\n  );\n\n  const onCancelEditMode = useCallback(\n    () => setEditMode(false),\n    [],\n  );\n\n  return (\n    <>\n      <label htmlFor=\"preset-selector\">Preset:</label>\n\n      {inEditMode ? (\n        <input\n          type=\"text\"\n          value={presetName}\n          onChange={onChangePresetName}\n          style={{boxSizing: \"border-box\", width: \"150px\", padding: \"1px 5px\"}}\n        />\n      ) : (\n        <select\n          id=\"preset-selector\"\n          value={selectedPreset}\n          onChange={onSelectNewPreset}\n          style={{boxSizing: \"border-box\", width: \"150px\"}}\n        >\n          {presets.map(preset =>\n            <option key={preset.name}>{preset.name}</option>\n          )}\n        </select>\n      )}\n\n      <button onClick={onClickSavePreset} style={{marginLeft: \"10px\"}}>\n        Save\n      </button>\n\n      {inEditMode ? (\n        <button onClick={onCancelEditMode} style={{marginLeft: \"10px\"}}>\n          Cancel\n        </button>\n      ) : null}\n    </>\n  );\n}\n\nconst snapshotAndSavePreset = (presetName) => (dispatch, getState) => {\n  const state = getState();\n  const settings = {...state};\n  delete settings.preset;\n  dispatch(savePreset(presetName, settings));\n};\n\nexport default connect(\n  state => ({\n    presets: state.preset.presets,\n    selectedPreset: state.preset.selectedPreset,\n  }),\n  {\n    savePreset: snapshotAndSavePreset,\n    loadPreset,\n  },\n)(PresetSelector);\n","import React from \"react\";\nimport {reverbImpulses, setReverbImpulse} from \"../../reducers/reverb\";\nimport {connect} from \"react-redux\";\n\nconst AdvancedReverb = ({reverbImpulse, setReverbImpulse}) => (\n  <>\n    <label htmlFor=\"reverb-impulse\">\n      Reverb impulse:\n    </label>\n    <select id=\"reverb-impulse\"\n            value={reverbImpulse}\n            onChange={setReverbImpulse}>\n      {reverbImpulses.map(impulse => (\n        <option value={impulse.id} key={impulse.id}>\n          {impulse.name}\n        </option>\n      ))}\n    </select>\n  </>\n);\n\nconst mapStateToProps = state => ({\n  reverbImpulse: state.reverb.impulse,\n});\n\nconst mapDispatchToProps = dispatch => ({\n  setReverbImpulse: (e) => dispatch(setReverbImpulse(e.target.value)),\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AdvancedReverb);\n","import allure59tweed from \"../impulses/cabinet/Allure_59_Tweed_P10N.wav\";\nimport allure64a30 from \"../impulses/cabinet/Allure_64_A30_G12.wav\";\nimport allure64usdeluxe from \"../impulses/cabinet/Allure_64_USDeluxe_P12N.wav\";\nimport allure67brit from \"../impulses/cabinet/Allure_67_Brit_Greenback.wav\";\nimport marshall1960 from \"../impulses/cabinet/Marshall1960.wav\";\nimport mesaboogie57ts from \"../impulses/cabinet/MesaBoogie57TS.wav\";\nimport voxtweed1x12 from \"../impulses/cabinet/vox_tweed_1x12.wav\";\nimport plexilead from \"../impulses/cabinet/Plexi Lead Channel.wav\";\n\nexport const cabinetImpulses = [\n  {\n    id: \"59_tweed\",\n    name: \"'59 Tweed P10N\",\n    impulse: allure59tweed,\n  },\n  {\n    id: \"64_a30\",\n    name: \"'64 A30 G12\",\n    impulse: allure64a30,\n  },\n  {\n    id: \"64_usdeluxe\",\n    name: \"'64 USDeluxe P12N\",\n    impulse: allure64usdeluxe,\n  },\n  {\n    id: \"67_brit_greenback\",\n    name: \"'67 Brit Greenback\",\n    impulse: allure67brit,\n  },\n  {\n    id: \"marshall_1960\",\n    name: \"Marshall 1960\",\n    impulse: marshall1960,\n  },\n  {\n    id: \"mesa-boogie-57-ts\",\n    name: \"Mesa Boogie 57 TS\",\n    impulse: mesaboogie57ts,\n  },\n  {\n    id: \"vox-tweed-1x12\",\n    name: \"Vox Tweed 1x12\",\n    impulse: voxtweed1x12,\n  },\n  {\n    id: \"plexi-lead\",\n    name: \"Plexi Lead\",\n    impulse: plexilead,\n  },\n];\n\nexport function getCabinetImpulseUrl(id) {\n  return cabinetImpulses.find(impulse => impulse.id === id).impulse;\n}\n\nexport const SET_CABINET_IMPULSE = \"SET_CABINET_IMPULSE\";\nexport const SET_CABINET_BYPASS = \"SET_CABINET_BYPASS\";\n\nexport const setCabinetImpulse = id => ({\n  type: SET_CABINET_IMPULSE,\n  id,\n});\n\nexport const setCabinetBypass = bypass => ({type: SET_CABINET_BYPASS, bypass});\n\nconst initialState = {\n  gain: 1,\n  bypass: false,\n  impulse: \"59_tweed\",\n};\n\nexport const cabinetReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case SET_CABINET_IMPULSE:\n      return {...state, impulse: action.id};\n    case SET_CABINET_BYPASS:\n      return {...state, bypass: action.bypass};\n    default:\n      return state;\n  }\n};\n","import React from \"react\";\nimport {cabinetImpulses, setCabinetBypass, setCabinetImpulse} from \"../../reducers/cabinet\";\nimport {connect} from \"react-redux\";\n\nconst CabinetSelector = ({cabinetImpulse, cabinetBypass, setCabinetImpulse, setCabinetBypass}) => (\n  <>\n    <label htmlFor=\"cabinet-impulse\">\n      Cabinet impulse:\n    </label>\n    <select\n      id=\"cabinet-impulse\"\n      value={cabinetImpulse}\n      onChange={setCabinetImpulse}\n    >\n      {cabinetImpulses.map(impulse => (\n        <option value={impulse.id} key={impulse.id}>\n          {impulse.name}\n        </option>\n      ))}\n    </select>\n    <label htmlFor=\"cabinet-bypass\">Bypass</label>\n    <input type=\"checkbox\" id=\"cabinet-bypass\"\n           checked={cabinetBypass}\n           onChange={setCabinetBypass}\n    />\n  </>\n);\n\nconst mapStateToProps = state => ({\n  cabinetImpulse: state.cabinet.impulse,\n  cabinetBypass: state.cabinet.bypass,\n});\n\nconst mapDispatchToProps = dispatch => ({\n  setCabinetImpulse: (e) => dispatch(setCabinetImpulse(e.target.value)),\n  setCabinetBypass: (e) => dispatch(setCabinetBypass(e.target.checked)),\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CabinetSelector);\n","import React from \"react\";\nimport {connect} from \"react-redux\";\nimport {setDistortionBypass, setDistortionCurve, setDistortionGain} from \"../../reducers/distortion\";\n\nconst DistortionSelector = ({curve, bypass, gain, setCurve, setBypass, setGain}) => (\n  <>\n    <label htmlFor=\"distortion-curve\">Distortion curve:</label>\n    <select\n      id=\"distortion-curve\"\n      onChange={setCurve}\n      value={curve}\n    >\n      <option value=\"blues\">Blues</option>\n      <option value=\"sunshine\">Sunshine</option>\n      <option value=\"driver\">Driver</option>\n      <option value=\"sustained\">Sustained</option>\n      <option value=\"arch\">Arch</option>\n      <option value=\"cubic\">Cubic</option>\n    </select>\n\n    <label htmlFor=\"distortion-bypass\">Bypass</label>\n    <input\n      type=\"checkbox\" id=\"distortion-bypass\"\n      checked={bypass}\n      onChange={setBypass}\n    />\n\n    <label htmlFor=\"distortion-gain\">Gain</label>\n    <input\n      value={gain}\n      onChange={setGain}\n      style={{width: \"200px\"}}\n      type=\"range\" min=\"0\" max=\"1\" step=\"0.005\"\n    />\n    <span style={{color: \"white\"}}>{gain}</span>\n  </>\n);\n\nconst mapStateToProps = state => state.distortion;\n\nconst mapDispatchToProps = dispatch => ({\n  setCurve: e => dispatch(setDistortionCurve(e.target.value)),\n  setBypass: e => dispatch(setDistortionBypass(e.target.checked)),\n  setGain: e => dispatch(setDistortionGain(e.target.value)),\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DistortionSelector);\n\n\n","import React, {Fragment} from \"react\";\nimport \"./AdvancedAmpControls.css\";\nimport PresetSelector from \"./AdvancedAmpControls/PresetSelector\";\nimport AdvancedReverb from \"./AdvancedAmpControls/AdvancedReverb\";\nimport CabinetSelector from \"./AdvancedAmpControls/CabinetSelector\";\nimport DistortionSelector from \"./AdvancedAmpControls/DistortionSelector\";\n\nconst AdvancedAmpControls = () => (\n  <Fragment>\n    <div className=\"select-input\">\n      <AdvancedReverb/>\n    </div>\n    <div className=\"select-input\">\n      <CabinetSelector/>\n    </div>\n    <div className=\"select-input\">\n      <DistortionSelector/>\n    </div>\n    <div className=\"select-input\">\n      <PresetSelector/>\n    </div>\n  </Fragment>\n);\n\n\nexport default AdvancedAmpControls;\n","import React, {Fragment, useEffect, useState} from \"react\";\n\nimport Crunch from \"./Crunch\";\nimport Knobs from \"./Knobs\";\nimport Equalizer from \"./Equalizer\";\nimport AdvancedAmpControls from \"./AdvancedAmpControls\";\nimport \"./Amp.css\";\n\nexport default function Amp() {\n  const [advanced, setShowAdvanced] = useState(false);\n\n  useEffect(() => {\n    const handler = e => {\n      if (e.key === \"1\") {\n        setShowAdvanced(!advanced);\n      }\n    };\n    document.addEventListener(\"keyup\", handler);\n\n    return function() {\n      document.removeEventListener(\"keyup\", handler);\n    };\n  }, [advanced, setShowAdvanced]);\n\n  return (\n    <Fragment>\n      <div className=\"amp\">\n        <div className=\"amp-control\">\n          <Knobs/>\n          <Crunch/>\n        </div>\n        <div className=\"amp-speaker\">\n          {advanced ? <AdvancedAmpControls/> : (\n            <div className=\"amp-pedals\">\n              <Equalizer/>\n            </div>\n          )}\n        </div>\n      </div>\n    </Fragment>\n  );\n}\n","export function connect(...args) {\n  for (let i = 0; i < args.length - 1; i++) {\n    const from = resolveOutput(args[i]);\n    const to = resolveInput(args[i + 1]);\n\n    from.forEach(f => {\n      to.forEach(t => f.connect(t));\n    });\n  }\n}\n\nfunction resolveOutput(node) {\n  if (node instanceof AudioNode) {\n    return [node];\n  } else if (Array.isArray(node)) {\n    return flatten(node.map(n => {\n      return resolveOutput(n);\n    }));\n  }\n  return flatten(resolveOutput(node.getOutput()));\n}\n\nfunction resolveInput(node) {\n  if (node instanceof AudioNode) {\n    return [node];\n  } else if (Array.isArray(node)) {\n    return flatten(node.map(n => resolveInput(n)));\n  }\n  return flatten(resolveInput(node.getInput()));\n}\n\nfunction flatten(arr, result = []) {\n  arr.forEach(n => {\n    if (Array.isArray(n)) {\n      flatten(n, result);\n    } else {\n      result.push(n);\n    }\n  });\n  return result;\n}\n","import {connect} from \"./utils\";\n\nexport default class Bypass {\n  constructor(context, effect) {\n    this.effect = effect;\n    this.bypass = context.createGain();\n    this.effectOut = context.createGain();\n\n    connect(effect, this.effectOut);\n\n    this.setBypass(false);\n  }\n\n  getInput() {\n    return [this.bypass, this.effect];\n  }\n\n  getOutput() {\n    return [this.bypass, this.effectOut];\n  }\n\n  setBypass(active) {\n    this.isActive = active;\n    if (active) {\n      this.bypass.gain.value = 1;\n      this.effectOut.gain.value = 0;\n    } else {\n      this.bypass.gain.value = 0;\n      this.effectOut.gain.value = 1;\n    }\n  }\n}\n","import {connect} from \"./utils\";\n\nexport default class MidEQ {\n  constructor(context) {\n    this.bassFilter = context.createBiquadFilter();\n    this.bassFilter.frequency.value = 250;\n    this.bassFilter.gain.value = 0;\n    this.bassFilter.type = \"lowshelf\";\n\n    this.midFilter = context.createBiquadFilter();\n    this.midFilter.frequency.value = 1100;\n    this.midFilter.gain.value = 0;\n    this.midFilter.type = \"peaking\";\n\n    this.trebleFilter = context.createBiquadFilter();\n    this.trebleFilter.frequency.value = 3200;\n    this.trebleFilter.gain.value = 0;\n    this.trebleFilter.type = \"highshelf\";\n\n    this.presenceFilter = context.createBiquadFilter();\n    this.presenceFilter.frequency.value = 2500;\n    this.presenceFilter.gain.value = 0;\n    this.presenceFilter.type = \"peaking\";\n\n    connect(\n      this.bassFilter,\n      this.midFilter,\n      this.trebleFilter,\n      this.presenceFilter,\n    );\n  }\n\n  setBass(value) {\n    this.bassFilter.gain.value = value;\n  }\n\n  setMiddle(value) {\n    this.midFilter.gain.value = value;\n  }\n\n  setTreble(value) {\n    this.trebleFilter.gain.value = value;\n  }\n\n  setPresence(value) {\n    this.presenceFilter.gain.value = value;\n  }\n\n  getInput() {\n    return this.bassFilter;\n  }\n\n  getOutput() {\n    return this.trebleFilter;\n  }\n}\n","// Boss GE-7 Equalizer Pedal\nconst eqBands = [100, 200, 400, 800, 1600, 3200, 6400];\n\nexport default class Equalizer {\n  constructor(context) {\n    this.bands = eqBands.map(freq => {\n      const filter = context.createBiquadFilter();\n      filter.type = \"peaking\";\n      filter.frequency.value = freq;\n      filter.gain.value = 0;\n      return filter;\n    });\n\n    for (let i = 0; i < this.bands.length - 1; i++) {\n      this.bands[i].connect(this.bands[i + 1]);\n    }\n  }\n\n  setFrequency(frequency, value) {\n    let index = eqBands.indexOf(frequency);\n    if (index === -1) {\n      throw new Error(`invalid frequency ${frequency}Hz`);\n    }\n    this.bands[index].gain.value = value;\n  }\n\n  getInput() {\n    return this.bands[0];\n  }\n\n  getOutput() {\n    return this.bands[this.bands.length - 1];\n  }\n}\n","import {connect} from \"./utils\";\n\nexport default class Cabinet {\n  constructor(context, impulseUrl) {\n    this.context = context;\n    this.convolver = context.createConvolver();\n\n    this.input = context.createGain();\n    this.input.gain.value = 1;\n    this.dry = context.createGain();\n    this.dry.gain.value = 1;\n    this.wet = context.createGain();\n    this.wet.gain.value = 0;\n    this.output = context.createGain();\n    this.output.gain.value = 1;\n\n    connect(\n      this.input,\n      this.dry,\n      this.output,\n    );\n\n    connect(\n      this.input,\n      this.convolver,\n      this.wet,\n      this.output,\n    );\n\n    if (impulseUrl) {\n      this.setImpulse(impulseUrl);\n    }\n  }\n\n  setGain(gain) {\n    this.dry.gain.value = Math.cos(gain * Math.PI / 2);\n    this.wet.gain.value = Math.cos((1 - gain) * Math.PI / 2);\n  }\n\n  setImpulse(impulseUrl) {\n    const ajaxRequest = new XMLHttpRequest();\n    ajaxRequest.open(\"GET\", impulseUrl, true);\n    ajaxRequest.responseType = \"arraybuffer\";\n\n    ajaxRequest.onload = () => {\n      const audioData = ajaxRequest.response;\n      this.context.decodeAudioData(audioData,\n        buffer => {\n          this.convolver.buffer = buffer;\n        },\n        e => {\n          throw new Error(\"Error with decoding audio data\" + e.err);\n        },\n      );\n    };\n\n    ajaxRequest.send();\n  }\n\n  getInput() {\n    return this.input;\n  }\n\n  getOutput() {\n    return this.output;\n  }\n}\n","export const curves = {\n  blues(amount, curve, n) {\n    const k = amount * 10;\n\n    for (let i = 0, x; i <= n; ++i) {\n      x = i * 2 / n - 1;\n      curve[i] = Math.tanh(0.5 * k * k * x * Math.PI);\n    }\n  },\n  sunshine(amount, curve, n) {\n    const k = amount * 10;\n\n    for (let i = 0, x, y; i <= n; ++i) {\n      x = i * 2 / n - 1;\n      y = Math.tanh(0.5 * x * k * Math.PI);\n      curve[i] = Math.tanh(0.5 * y * k * Math.PI) * Math.cos(0.5 * y);\n    }\n  },\n  // A nonlinearity by Partice Tarrabia and Bram de Jong.\n  driver(amount, curve, n) {\n    const k = amount * 100;\n\n    for (let i = 0, x; i < n; ++i) {\n      x = i * 2 / n - 1;\n\n      curve[i] = (1 + k / 101) * x / (1 + k / 101 * Math.abs(x));\n    }\n  },\n  sustained(amount, curve, n) {\n    const k = 1 - amount;\n\n    for (let i = 0, x, y; i < n; ++i) {\n      x = i * 2 / n - 1;\n      y = x < 0 ? -Math.pow(Math.abs(x), k + 0.04) : Math.pow(x, k);\n      curve[i] = Math.tanh(y * 2);\n    }\n  },\n  // Arctangent nonlinearity.\n  arch(amount, curve, n) {\n    const k = Math.max(amount, 0.01) * 100;\n\n    for (let i = 0, x; i < n; ++i) {\n      x = i * 2 / n - 1;\n      curve[i] = (2 / Math.PI) * Math.atan(k * x);\n    }\n  },\n  // A cubic nonlinearity, soft-clip, input range: [-1, 1]\n  cubic(amount, curve, n) {\n    for (let i = 0, x; i < n; ++i) {\n      x = i * 2 / n - 1;\n      curve[i] = 1.5 * x - 0.5 * Math.pow(x, 3);\n    }\n  }\n};\n\nexport function makeDistortionCurve(amount, n, type) {\n  const curve = new Float32Array(n);\n\n  curves[type](amount, curve, n);\n\n  return curve;\n}\n","import {makeDistortionCurve} from \"./distortion_fns\";\nimport {connect} from \"./utils\";\n\nexport default class Distortion {\n\n  constructor(context) {\n    this.context = context;\n    this.input = context.createGain();\n    this.output = context.createGain();\n    this.output.gain.value = 0.5;\n\n    const filter1 = context.createBiquadFilter();\n    filter1.type = \"highpass\";\n    filter1.frequency.value = 33;\n    filter1.Q.value = Math.SQRT1_2;\n\n    const preFilter = context.createBiquadFilter();\n    preFilter.type = \"bandpass\";\n    preFilter.Q.value = 0.7;\n    preFilter.frequency.value = 2150;\n\n    this.waveShaper = context.createWaveShaper();\n    this.waveShaper.oversample = \"4x\";\n\n    const postFilter = context.createBiquadFilter();\n    postFilter.type = \"lowpass\";\n    postFilter.Q.value = Math.SQRT1_2;\n    postFilter.frequency.value = 12000;\n\n    const toneFilter = context.createBiquadFilter();\n    toneFilter.type = \"lowpass\";\n    toneFilter.Q.value = Math.SQRT1_2;\n    toneFilter.frequency.value = 3200;\n\n    connect(this.input, filter1, preFilter, this.waveShaper,\n      postFilter, toneFilter, this.output);\n\n    this.setDistortionCurve(\"blues\", 0.5);\n  }\n\n  setDistortionCurve(curve, gain) {\n    if (curve !== this.curve || gain !== this.gain) {\n      this.waveShaper.curve = makeDistortionCurve(gain, this.context.sampleRate, curve);\n      this.curve = curve;\n      this.gain = gain;\n    }\n  }\n\n  getInput() {\n    return this.input;\n  }\n\n  getOutput() {\n    return this.output;\n  }\n\n}\n","import Bypass from \"./effects/Bypass\";\nimport Tone from \"./effects/Tone\";\nimport Equalizer from \"./effects/Equalizer\";\nimport Convolver from \"./effects/Convolver\";\nimport {connect} from \"./effects/utils\";\nimport {cabinetImpulses, getCabinetImpulseUrl} from \"./reducers/cabinet\";\nimport {getReverbImpulseUrl, reverbImpulses} from \"./reducers/reverb\";\nimport Distortion from \"./effects/Distortion\";\n\nexport default class Amplifier {\n  constructor(context, input, output, store) {\n    this.context = context;\n    this.input = input;\n    this.output = output;\n    this.store = store;\n\n    this.setup();\n  }\n\n  setup() {\n    const store = this.store;\n    const context = this.context;\n\n    const inputGain = context.createGain();\n\n    const distortion = new Distortion(context);\n    const distortionBypass = new Bypass(context, distortion);\n\n    const tone = new Tone(context);\n\n    const equalizer = new Equalizer(context);\n    const equalizerBypass = new Bypass(context, equalizer);\n\n    const reverb = new Convolver(context, reverbImpulses[0].impulse);\n\n    const cabinet = new Convolver(context, cabinetImpulses[0].impulse);\n    cabinet.setGain(1);\n\n    const cabinetBypass = new Bypass(context, cabinet);\n\n    const volume = context.createGain();\n    const master = context.createGain();\n\n    const update = () => {\n      const state = store.getState();\n\n      if (state.distortion !== this.distortion) {\n        distortion.setDistortionCurve(state.distortion.curve, state.distortion.gain);\n        this.distortion = state.distortion;\n      }\n      distortionBypass.setBypass(state.distortion.bypass);\n\n      tone.setBass(state.tone.bass);\n      tone.setMiddle(state.tone.middle);\n      tone.setTreble(state.tone.treble);\n      tone.setPresence(state.tone.presence);\n\n      reverb.setGain(state.reverb.gain / 80);\n      if (this.reverbImpulse !== state.reverb.impulse) {\n        reverb.setImpulse(getReverbImpulseUrl(state.reverb.impulse));\n        this.reverbImpulse = state.reverb.impulse;\n      }\n\n      if (this.cabinetImpulse !== state.cabinet.impulse) {\n        cabinet.setImpulse(getCabinetImpulseUrl(state.cabinet.impulse));\n        this.cabinetImpulse = state.cabinet.impulse;\n      }\n      cabinetBypass.setBypass(state.cabinet.bypass);\n\n      volume.gain.value = state.tone.volume / 2;\n      master.gain.value = state.tone.master / 4;\n      equalizerBypass.setBypass(state.eq.bypass);\n\n      Object.keys(state.eq.bands).forEach((value, index) => {\n        const freq = 100 * Math.pow(2, index);\n        equalizer.setFrequency(freq, value);\n      });\n    };\n\n    update();\n    store.subscribe(update);\n\n    connect(\n      this.input,\n      inputGain,\n      distortionBypass,\n      tone,\n      equalizerBypass,\n      reverb,\n      cabinetBypass,\n      volume,\n      master,\n      this.output,\n    );\n  }\n}\n","import {combineReducers} from \"redux\";\nimport {eqReducer} from \"./eq\";\nimport {toneReducer} from \"./tone\";\nimport {cabinetReducer} from \"./cabinet\";\nimport {reverbReducer} from \"./reverb\";\nimport {distortionReducer} from \"./distortion\";\nimport {LOAD_PRESET, presetReducer, SAVE_PRESET} from \"./preset\";\n\nconst reducer = combineReducers({\n  distortion: distortionReducer,\n  tone: toneReducer,\n  reverb: reverbReducer,\n  eq: eqReducer,\n  cabinet: cabinetReducer,\n  preset: presetReducer,\n});\n\nexport default function (state, action) {\n  const newState = reducer(state, action);\n\n  switch (action.type) {\n    case SAVE_PRESET:\n      localStorage.setItem(\"presets\", JSON.stringify(newState.preset.presets));\n      return newState;\n    case LOAD_PRESET:\n      const selectedPreset = newState.preset.selectedPreset;\n      const preset = newState.preset.presets.find(preset => preset.name === selectedPreset);\n      if (preset) {\n        return {...newState, ...preset.preset};\n      }\n      return newState;\n  }\n  return newState;\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport Amp from \"./components/Amp\";\nimport Amplifier from \"./Amplifier\";\nimport {applyMiddleware, createStore} from \"redux\";\nimport reducer from \"./reducers/reducer\";\nimport {Provider} from \"react-redux\";\nimport thunk from \"redux-thunk\";\n\nwindow.Amplifier = Amplifier;\nwindow.BootstrapGuitarAmplifier = function (opts) {\n  const store = createStore(reducer, applyMiddleware(thunk));\n\n  const element = (opts && opts.hasOwnProperty(\"element\")) ?\n    opts.element : opts;\n  const audioInput = (opts && opts.hasOwnProperty(\"input\")) ?\n    opts.input : null;\n  const context = (opts && opts.hasOwnProperty(\"context\")) ?\n    opts.context : new AudioContext();\n  const output = context.destination;\n\n  if (element) {\n    ReactDOM.render(\n      <Provider store={store}>\n        <Amp/>\n      </Provider>,\n      element,\n    );\n  }\n\n  function getInput(audioInput) {\n    if (audioInput) {\n      return Promise.resolve(audioInput);\n    }\n    return navigator.mediaDevices.getUserMedia({\n      audio: {\n        echoCancellation: false,\n        autoGainControl: false,\n        noiseSuppression: false,\n        latency: 0,\n      },\n    }).then(stream => context.createMediaStreamSource(stream));\n  }\n\n  return getInput(audioInput)\n    .then(input => {\n      const amplifier = new Amplifier(context, input, output, store);\n\n      return {\n        amplifier,\n        store,\n        unmount: function () {\n          ReactDOM.unmountComponentAtNode(element);\n          return context.close();\n        },\n      };\n    });\n};\n"],"sourceRoot":""}